<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo (Vanilla) · Agenda cultural (XML)</title>
  <style>
    :root{--pri:#ba273b;--b:#f7f7f7;--bd:#e6e6e6}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto; margin:16px; line-height:1.5}
    h1{color:var(--pri); font-size:1.2rem; margin:0 0 .6rem}
    #estado{opacity:.85; margin:.25rem 0 1rem}
    .grid{display:grid; gap:12px; grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
    .card{border:1px solid var(--bd); border-radius:12px; background:#fff; padding:12px}
    .card h2{margin:.2rem 0 .4rem; font-size:1rem; color:#222}
    .meta{font-size:.9rem; color:#555}
    img{max-width:100%; height:auto; border-radius:8px; display:block; margin:.4rem 0}
    .pill{display:inline-block; background:var(--b); border:1px solid var(--bd); border-radius:999px; padding:.1rem .5rem; font-size:.8rem; color:#444}
    footer{margin-top:.75rem; opacity:.8; font-size:.9rem}
  </style>
</head>
<body>
  <h1>Agenda cultural (XML · JCyL)</h1>
  <p id="estado">Cargando…</p>
  <section id="lista" class="grid" aria-live="polite"></section>

<script>
// Función para procesar eventos desde XML
function procesarEventos() {
    fetch('eventos.xml')
        .then(response => response.text())
        .then(data => {
            const parser = new DOMParser();
            const xml = parser.parseFromString(data, "text/xml");
            
            const eventos = xml.querySelectorAll('element');
            
            eventos.forEach(evento => {
                let titulo = '';
                let fechaInicio = '';
                let fechaFin = '';
                
                // Buscar atributos específicos
                const atributos = evento.querySelectorAll('attribute');
                atributos.forEach(attr => {
                    const nombre = attr.getAttribute('name');
                    
                    if (nombre === 'Titulo_es') {
                        titulo = attr.querySelector('string').textContent;
                    }
                    if (nombre === 'FechaInicio') {
                        const fechaElement = attr.querySelector('array string');
                        if (fechaElement) fechaInicio = fechaElement.textContent;
                    }
                    if (nombre === 'FechaFin') {
                        const fechaElement = attr.querySelector('string');
                        if (fechaElement) fechaFin = fechaElement.textContent;
                    }
                });
                
                // Mostrar información en consola
                console.log('Título:', titulo);
                console.log('Fecha inicio:', formatearFecha(fechaInicio));
                console.log('Fecha fin:', formatearFecha(fechaFin));
                console.log('---');
            });
        })
        .catch(error => console.error('Error:', error));
}

function formatearFecha(fecha) {
    if (!fecha || fecha.length !== 8) return 'No especificada';
    return `${fecha.substr(6,2)}/${fecha.substr(4,2)}/${fecha.substr(0,4)}`;
}

// Ejecutar
procesarEventos();
</script>
<footer>Fuente: Datos Abiertos de la Junta de Castilla y León · Dataset “Agenda cultural (eventos.xml)”.</footer>
</body>
</html>
